!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1),r=n(11),o=n(13);i.updateViewSize(r.getCurrent());var l=new i(0,0);o.addListener(function(e){l.setPosition(l.getX()+e.x,l.getY()+e.y)}),r.addListener(function(e){i.updateViewSize(e),l.updatePosition()})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);i=!0);}catch(a){r=!0,o=a}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),s=l.rootElement,a=l.cell,u=a.height,c=a.width,h=l.matrixSize,f=h.height,y=h.width,m=n(3),v=n(4);n(7);var p=function(){function e(){i(this,e);var t=document.createElement("div");t.className=m.matrix._,this.elem=t,this.x=0,this.y=0,this.cells={},this._lastCurrentCell=null,this._tNormalize=null,this.setPosition(0,0),s.appendChild(t)}return o(e,[{key:"addCell",value:function(t,n){var i=document.createElement("div");i.className=m.cell._+" "+m.cell.loading,i.style.height=u+"px",i.style.width=c+"px",i.style.top=u*n+"px",i.style.left=c*t+"px",i.style.backgroundColor=e.randomColor();var r=document.createElement("img");r.className=m.image._,r.src=v(t,n),r.onload=function(){return i.classList.remove(m.cell.loading)},i.appendChild(r);var o=document.createElement("div");o.className=m.number._,o.innerText=1+v.getIndex(t,n),i.appendChild(o),this.elem.appendChild(i),this.cells[e._getCellKey(t,n)]=i}},{key:"hasCell",value:function(t,n){return e._getCellKey(t,n)in this.cells}},{key:"getCell",value:function(t,n){return this.cells[e._getCellKey(t,n)]}},{key:"removeCell",value:function(t,n){var i=e._getCellKey(t,n);this.elem.removeChild(this.cells[i]),delete this.cells[i]}},{key:"lazyLoadCells",value:function(){for(var e=this.getViewZone(),t=e.x1,n=e.x2,i=e.y1,r=e.y2,o=t;o<=n;++o)for(var l=i;l<=r;++l)this.hasCell(o,l)||this.addCell(o,l);this.setCurrentCell()}},{key:"gc",value:function(){var e=this.getViewZone(2),t=e.x1,n=e.x2,i=e.y1,o=e.y2,l=!0,s=!1,a=void 0;try{for(var u,c=Object.keys(this.cells)[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var h=u.value,f=h.split("_"),y=r(f,2),m=y[0],v=y[1];(m<t||m>n||v<i||v>o)&&this.removeCell(m,v)}}catch(p){s=!0,a=p}finally{try{!l&&c["return"]&&c["return"]()}finally{if(s)throw a}}}},{key:"normalize",value:function(){var t=0,n=0,i=e.NORMALIZE_LIMIT;if((this.x<-y*i||this.x>y*i)&&(t=~~(this.x/-y)*y),(this.y<-f*i||this.y>f*i)&&(n=~~(this.y/-f)*f),t||n){var o=t*c,l=n*u,s=!0,a=!1,h=void 0;try{for(var m,v=Object.keys(this.cells)[Symbol.iterator]();!(s=(m=v.next()).done);s=!0){var p=m.value,_=this.cells[p];_.style.top=parseInt(_.style.top,10)+l+"px",_.style.left=parseInt(_.style.left,10)+o+"px";var d=p.split("_"),w=r(d,2),x=w[0],b=w[1],g=e._getCellKey(+x+t,+b+n);delete this.cells[p],this.cells[g]=_}}catch(C){a=!0,h=C}finally{try{!s&&v["return"]&&v["return"]()}finally{if(a)throw h}}this.x+=t,this.y+=n;var k=this.elem.style.transition;this.elem.style.transition="none",this.updatePosition(),this._h=this.elem.offsetHeight,this.elem.style.transition=k,this._h=this.elem.offsetHeight}}},{key:"setPosition",value:function(e,t){var n=this;this.x=e,this.y=t,this.setCurrentCell(),this.updatePosition(),this._tNormalize&&clearTimeout(this._tNormalize),this._tNormalize=setTimeout(function(){return n.normalize()},500),setTimeout(function(){n.gc(),n.lazyLoadCells()},300)}},{key:"updatePosition",value:function(){this.elem.style.top=(this.y+.5)*-u+e.hh+"px",this.elem.style.left=(this.x+.5)*-c+e.hw+"px"}},{key:"setCurrentCell",value:function(){var e=this.getCell(this.x,this.y);this._lastCurrentCell!==e&&(this._lastCurrentCell&&this._lastCurrentCell.classList.remove(m.cell.current),e&&(e.classList.add(m.cell.current),this._lastCurrentCell=e))}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getViewZone",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return{x1:this.x-e.W_VIEW_SIZE-t,x2:this.x+e.W_VIEW_SIZE+t,y1:this.y-e.H_VIEW_SIZE-t,y2:this.y+e.H_VIEW_SIZE+t}}}],[{key:"_getCellKey",value:function(e,t){return e+"_"+t}},{key:"updateViewSize",value:function(t){e.hw=t.half.vw,e.hh=t.half.vh,e.H_VIEW_SIZE=Math.ceil(~~(t.vh/u)/2)+1,e.W_VIEW_SIZE=Math.ceil(~~(t.vw/c)/2)+1}},{key:"randomColor",value:function(){function e(e,t){return e+Math.random()*(t-e)}var t=e(1,360),n=e(40,60),i=e(40,60);return"hsl("+t+","+n+"%,"+i+"%)"}}]),e}();p.NORMALIZE_LIMIT=4,p.hw=0,p.hh=0,p.H_VIEW_SIZE=0,p.W_VIEW_SIZE=0,e.exports=p},function(e,t){"use strict";e.exports={cell:{height:240,width:320},matrixSize:{height:32,width:48},rootElement:document.body}},function(e,t){"use strict";var n="b-matrix";e.exports={matrix:{_:n},cell:{_:n+"__cell",loading:n+"__cell_loading",current:n+"__cell_current"},image:{_:n+"__image"},number:{_:n+"__number"}}},function(e,t,n){"use strict";function i(e,t){return t%=a,e%=u,t<0&&(t+=a),e<0&&(e+=u),t*u+e}var r=n(5),o=n(6),l=n(2),s=l.matrixSize,a=s.height,u=s.width,c=l.cell,h=c.height,f=c.width;e.exports=function(e,t){var n=i(e,t);return n%2===0?r(h,f,n/2):o(h,f,~~(n/2)+1)},e.exports.getIndex=i},function(e,t){"use strict";e.exports=function(e,t,n){return"http://unsplash.it/"+t+"/"+e+"/?image="+n}},function(e,t){"use strict";e.exports=function(e,t,n){return"http://placeimg.com/"+t+"/"+e+"/any?random="+n}},function(e,t){},,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(12),a=function(e){function t(){i(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.isOverflow=!0,e.ms=40,window.addEventListener("resize",function(){e._emit(e.getCurrent())}),e}return o(t,e),l(t,[{key:"getCurrent",value:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return{vw:e,vh:t,half:{vw:~~(e/2),vh:~~(t/2)}}}}]),t}(s);e.exports=new a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this._listeners=[],this._timeout=null,this._wait=!1,this._overflow=null,this.ms=250,this.isOverflow=!1}return i(e,[{key:"_emit",value:function(e){var t=this;if(this._wait)this.isOverflow&&(this._overflow=e);else{this._wait=!0,this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){t._wait=!1,t._overflow&&(t._emit(t._overflow),t._overflow=null)},this.ms);var n=!0,i=!1,r=void 0;try{for(var o,l=this._listeners[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;s(e)}}catch(a){i=!0,r=a}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw r}}}}},{key:"addListener",value:function(e){this._listeners.push(e)}}]),e}();e.exports=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(12),s=function(e){function t(){i(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return window.addEventListener("keydown",function(t){switch(t.which){case 38:e._emit({x:0,y:-1});break;case 40:e._emit({x:0,y:1});break;case 37:e._emit({x:-1,y:0});break;case 39:e._emit({x:1,y:0});break;case 97:e._emit({x:-1,y:1});break;case 98:e._emit({x:0,y:1});break;case 99:e._emit({x:1,y:1});break;case 100:e._emit({x:-1,y:0});break;case 101:e._emit({x:0,y:0});break;case 102:e._emit({x:1,y:0});break;case 103:e._emit({x:-1,y:-1});break;case 104:e._emit({x:0,y:-1});break;case 105:e._emit({x:1,y:-1})}}),e}return o(t,e),t}(l);e.exports=new s}]);