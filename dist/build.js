!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var n=i(1),r=i(11),l=i(13);n.updateViewSize(r.getCurrent());var o=new n(0,0);l.addListener(function(e){o.setPosition(o.getX()+e.x,o.getY()+e.y)}),r.addListener(function(e){n.updateViewSize(e),o.updatePosition()})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var i=[],n=!0,r=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(a){r=!0,l=a}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw l}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(2),s=o.rootElement,a=o.cell,u=a.height,c=a.width,h=o.matrixSize,f=h.height,y=h.width,v=i(3),m=i(4);i(7);var p=function(){function e(){n(this,e);var t=document.createElement("div");t.className=v.matrix._,this.elem=t,this.x=0,this.y=0,this.cells={},this._lastCurrentCell=null,this._tNormalize=null,this.setPosition(0,0),s.appendChild(t)}return l(e,[{key:"addCell",value:function(t,i){var n=document.createElement("div");n.className=v.cell._+" "+v.cell.loading,n.style.height=u+"px",n.style.width=c+"px",n.style.top=u*i+"px",n.style.left=c*t+"px";var r=document.createElement("img");r.className=v.image._,r.src=m(t,i),r.onload=function(){return n.classList.remove(v.cell.loading)},n.appendChild(r);var l=document.createElement("div");l.className=v.number._,l.innerText=1+m.getIndex(t,i),n.appendChild(l),this.elem.appendChild(n),this.cells[e._getCellKey(t,i)]=n}},{key:"hasCell",value:function(t,i){return e._getCellKey(t,i)in this.cells}},{key:"getCell",value:function(t,i){return this.cells[e._getCellKey(t,i)]}},{key:"removeCell",value:function(t,i){var n=e._getCellKey(t,i);this.elem.removeChild(this.cells[n]),delete this.cells[n]}},{key:"lazyLoadCells",value:function(){for(var e=this.getViewZone(),t=e.x1,i=e.x2,n=e.y1,r=e.y2,l=t;l<=i;++l)for(var o=n;o<=r;++o)this.hasCell(l,o)||this.addCell(l,o);this.setCurrentCell()}},{key:"gc",value:function(){var e=this.getViewZone(2),t=e.x1,i=e.x2,n=e.y1,l=e.y2,o=!0,s=!1,a=void 0;try{for(var u,c=Object.keys(this.cells)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value,f=h.split("_"),y=r(f,2),v=y[0],m=y[1];(v<t||v>i||m<n||m>l)&&this.removeCell(v,m)}}catch(p){s=!0,a=p}finally{try{!o&&c["return"]&&c["return"]()}finally{if(s)throw a}}}},{key:"normalize",value:function(){var t=0,i=0,n=e.NORMALIZE_LIMIT;if((this.x<-y*n||this.x>y*n)&&(t=~~(this.x/-y)*y),(this.y<-f*n||this.y>f*n)&&(i=~~(this.y/-f)*f),t||i){var l=t*c,o=i*u,s=!0,a=!1,h=void 0;try{for(var v,m=Object.keys(this.cells)[Symbol.iterator]();!(s=(v=m.next()).done);s=!0){var p=v.value,_=this.cells[p];_.style.top=parseInt(_.style.top,10)+o+"px",_.style.left=parseInt(_.style.left,10)+l+"px";var d=p.split("_"),w=r(d,2),x=w[0],b=w[1],g=e._getCellKey(+x+t,+b+i);delete this.cells[p],this.cells[g]=_}}catch(C){a=!0,h=C}finally{try{!s&&m["return"]&&m["return"]()}finally{if(a)throw h}}this.x+=t,this.y+=i;var E=this.elem.style.transition;this.elem.style.transition="none",this.updatePosition(),this._h=this.elem.offsetHeight,this.elem.style.transition=E,this._h=this.elem.offsetHeight}}},{key:"setPosition",value:function(e,t){var i=this;this.x=e,this.y=t,this.setCurrentCell(),this.updatePosition(),this._tNormalize&&clearTimeout(this._tNormalize),this._tNormalize=setTimeout(function(){return i.normalize()},500),setTimeout(function(){i.gc(),i.lazyLoadCells()},300)}},{key:"updatePosition",value:function(){this.elem.style.top=(this.y+.5)*-u+e.hh+"px",this.elem.style.left=(this.x+.5)*-c+e.hw+"px"}},{key:"setCurrentCell",value:function(){var e=this.getCell(this.x,this.y);this._lastCurrentCell!==e&&(this._lastCurrentCell&&this._lastCurrentCell.classList.remove(v.cell.current),e&&(e.classList.add(v.cell.current),this._lastCurrentCell=e))}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getViewZone",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return{x1:this.x-e.W_VIEW_SIZE-t,x2:this.x+e.W_VIEW_SIZE+t,y1:this.y-e.H_VIEW_SIZE-t,y2:this.y+e.H_VIEW_SIZE+t}}}],[{key:"_getCellKey",value:function(e,t){return e+"_"+t}},{key:"updateViewSize",value:function(t){e.hw=t.half.vw,e.hh=t.half.vh,e.H_VIEW_SIZE=Math.ceil(~~(t.vh/u)/2)+1,e.W_VIEW_SIZE=Math.ceil(~~(t.vw/c)/2)+1}}]),e}();p.NORMALIZE_LIMIT=4,p.hw=0,p.hh=0,p.H_VIEW_SIZE=0,p.W_VIEW_SIZE=0,e.exports=p},function(e,t){"use strict";e.exports={cell:{height:240,width:320},matrixSize:{height:32,width:48},rootElement:document.body}},function(e,t){"use strict";var i="b-matrix";e.exports={matrix:{_:i},cell:{_:i+"__cell",loading:i+"__cell_loading",current:i+"__cell_current"},image:{_:i+"__image"},number:{_:i+"__number"}}},function(e,t,i){"use strict";function n(e,t){return t%=a,e%=u,t<0&&(t+=a),e<0&&(e+=u),t*u+e}var r=i(5),l=i(6),o=i(2),s=o.matrixSize,a=s.height,u=s.width,c=o.cell,h=c.height,f=c.width;e.exports=function(e,t){var i=n(e,t);return i%2===0?r(h,f,i/2):l(h,f,~~(i/2)+1)},e.exports.getIndex=n},function(e,t){"use strict";e.exports=function(e,t,i){return"http://unsplash.it/"+t+"/"+e+"/?image="+i}},function(e,t){"use strict";e.exports=function(e,t,i){return"http://placeimg.com/"+t+"/"+e+"/any?random="+i}},function(e,t){},,,,function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(12),a=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.isOverflow=!0,e.ms=40,window.addEventListener("resize",function(){e._emit(e.getCurrent())}),e}return l(t,e),o(t,[{key:"getCurrent",value:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return{vw:e,vh:t,half:{vw:~~(e/2),vh:~~(t/2)}}}}]),t}(s);e.exports=new a},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){i(this,e),this._listeners=[],this._timeout=null,this._wait=!1,this._overflow=null,this.ms=250,this.isOverflow=!1}return n(e,[{key:"_emit",value:function(e){var t=this;if(this._wait)this.isOverflow&&(this._overflow=e);else{this._wait=!0,this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){t._wait=!1,t._overflow&&(t._emit(t._overflow),t._overflow=null)},this.ms);var i=!0,n=!1,r=void 0;try{for(var l,o=this._listeners[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){var s=l.value;s(e)}}catch(a){n=!0,r=a}finally{try{!i&&o["return"]&&o["return"]()}finally{if(n)throw r}}}}},{key:"addListener",value:function(e){this._listeners.push(e)}}]),e}();e.exports=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(12),s=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return window.addEventListener("keydown",function(t){switch(t.which){case 38:e._emit({x:0,y:-1});break;case 40:e._emit({x:0,y:1});break;case 37:e._emit({x:-1,y:0});break;case 39:e._emit({x:1,y:0});break;case 97:e._emit({x:-1,y:1});break;case 98:e._emit({x:0,y:1});break;case 99:e._emit({x:1,y:1});break;case 100:e._emit({x:-1,y:0});break;case 101:e._emit({x:0,y:0});break;case 102:e._emit({x:1,y:0});break;case 103:e._emit({x:-1,y:-1});break;case 104:e._emit({x:0,y:-1});break;case 105:e._emit({x:1,y:-1})}}),e}return l(t,e),t}(o);e.exports=new s}]);